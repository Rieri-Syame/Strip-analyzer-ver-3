function uploadToDrive() {
  const name = document.getElementById('userNameInput').value.trim();
  if (!name) {
    alert('Please enter your name');
    return;
  }

  const payload = {
    image: warped.toDataURL('image/png'),
    name: name
  };

  // This is the only line that matters: USE THE PROXY
  const proxyUrl = "https://corsproxy.io/?";
  const targetUrl = 'https://script.google.com/macros/s/AKfycby1eepW4cUzuvWjM_r61A848NLQmXI9PumEW0j6mxdPQgAmLelaQOZolrKkB83cx_b0/exec';
  const uploadUrl = proxyUrl + encodeURIComponent(targetUrl);

  fetch(uploadUrl, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(payload)
  })
  .then(res => res.text())  // Proxy returns plain text
  .then(data => {
    console.log('✅ Server said:', data);
    alert('✅ Upload complete:\n' + data);
  })
  .catch(err => {
    console.error('❌ Upload error:', err);
    alert('❌ Upload failed: ' + err.message);
  });
}
